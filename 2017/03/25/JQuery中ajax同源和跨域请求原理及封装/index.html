<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>JQuery中ajax同源和跨域请求原理及封装 | 本人博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="js中ajax的基本步骤1234567891011121314151617window.onload = function () &amp;#123;        var xhr = new XMLHttpRequest();        xhr.open(&apos;post&apos;,&apos;XXX.php&apos;);        xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;applicatio">
<meta name="keywords" content="jquery,ajax,json,jsonp">
<meta property="og:type" content="article">
<meta property="og:title" content="JQuery中ajax同源和跨域请求原理及封装">
<meta property="og:url" content="http://yoursite.com/2017/03/25/JQuery中ajax同源和跨域请求原理及封装/index.html">
<meta property="og:site_name" content="本人博客">
<meta property="og:description" content="js中ajax的基本步骤1234567891011121314151617window.onload = function () &amp;#123;        var xhr = new XMLHttpRequest();        xhr.open(&apos;post&apos;,&apos;XXX.php&apos;);        xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;applicatio">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-09-18T12:02:14.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JQuery中ajax同源和跨域请求原理及封装">
<meta name="twitter:description" content="js中ajax的基本步骤1234567891011121314151617window.onload = function () &amp;#123;        var xhr = new XMLHttpRequest();        xhr.open(&apos;post&apos;,&apos;XXX.php&apos;);        xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;applicatio">
    

    
        <link rel="alternate" href="/" title="本人博客" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">本人博客</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">首页</a>
                
                    <a class="main-nav-link" href="/archives">档案</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/1.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">档案</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/1.jpg" />
            <h2 id="name">shine-wl</h2>
            <h3 id="title">初出茅庐</h3>
            <span id="location"><i class="fa fa-map-marker"></i>天津, 中国</span>
            <a id="follow" target="_blank" href="https://github.com/Shine-wl">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                15
                <span>posts</span>
            </div>
            <div class="article-info-block">
                18
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://shine-wl.github.io/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-JQuery中ajax同源和跨域请求原理及封装" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            JQuery中ajax同源和跨域请求原理及封装
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/03/25/JQuery中ajax同源和跨域请求原理及封装/">
            <time datetime="2017-03-25T02:44:37.000Z" itemprop="datePublished">2017-03-25</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/ajax/">ajax</a>, <a class="tag-link" href="/tags/jquery/">jquery</a>, <a class="tag-link" href="/tags/json/">json</a>, <a class="tag-link" href="/tags/jsonp/">jsonp</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="js中ajax的基本步骤"><a href="#js中ajax的基本步骤" class="headerlink" title="js中ajax的基本步骤"></a>js中ajax的基本步骤</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        xhr.open(<span class="string">'post'</span>,<span class="string">'XXX.php'</span>);</div><div class="line">        xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</div><div class="line">        xhr.send(<span class="literal">null</span>);</div><div class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</div><div class="line">                <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</div><div class="line">                    <span class="comment">/*返回json数据*/</span></div><div class="line">                    <span class="built_in">console</span>.log(xhr.responseText);</div><div class="line">                    <span class="comment">/*转换json对象*/</span></div><div class="line">                    <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(xhr.responseText);</div><div class="line">                    <span class="built_in">console</span>.log(data);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="同源和跨域"><a href="#同源和跨域" class="headerlink" title="同源和跨域"></a>同源和跨域</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">同源是指，域名，协议，端口均相同</div><div class="line">跨域，指的是浏览器不能执行其他网站的脚本。</div><div class="line">它是由浏览器的同源策略造成的，是浏览器对javascript施加的安全限制。</div></pre></td></tr></table></figure>
<h1 id="jQuery中ajax的使用"><a href="#jQuery中ajax的使用" class="headerlink" title="jQuery中ajax的使用"></a>jQuery中ajax的使用</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       $.ajax(&#123;</div><div class="line">           type:<span class="string">'post'</span>,</div><div class="line">           url:<span class="string">'地址'</span>,</div><div class="line">           data:&#123;<span class="attr">name</span>:<span class="string">'zbw'</span>&#125;, <span class="comment">// 根据接口文档来确定要传入的data数据 </span></div><div class="line">           <span class="keyword">async</span>:<span class="literal">true</span>,<span class="comment">//是否异步</span></div><div class="line">           success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">               <span class="built_in">console</span>.log(<span class="string">'success'</span>);</div><div class="line">               <span class="built_in">console</span>.log(data);</div><div class="line">           &#125;,</div><div class="line">           error:<span class="function"><span class="keyword">function</span> (<span class="params">info</span>) </span>&#123;</div><div class="line">               <span class="built_in">console</span>.log(<span class="string">'error'</span>);</div><div class="line">               <span class="built_in">console</span>.log(info);</div><div class="line">           &#125;,</div><div class="line">           <span class="comment">/*jquery ajax 常见参数*/</span></div><div class="line">           <span class="comment">/*dataType  强制转化成某种数据格式*/</span></div><div class="line">           <span class="comment">/*转换失败的时候  调用失败回调函数*/</span></div><div class="line">           dataType:<span class="string">'json'</span>,</div><div class="line">           <span class="comment">/*timeout  在通讯时间超出设定的时间时候中断ajax通讯*/</span></div><div class="line">           timeout:<span class="number">4000</span>,</div><div class="line">           <span class="comment">/*beforeSend 发送之前的回调函数  发送之前的业务*/</span></div><div class="line">           beforeSend:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">               <span class="keyword">var</span> $key = $(<span class="string">'#key'</span>);</div><div class="line">               <span class="keyword">if</span>(!$key.val())&#123;</div><div class="line">                   <span class="comment">/*beforeSend 返回的是false 终止发送*/</span></div><div class="line">                   <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">               &#125;</div><div class="line">           &#125;,</div><div class="line">           <span class="comment">/*complete 通讯完成回调函数  在成功或失败之后执行*/</span></div><div class="line">           complete:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">               <span class="built_in">console</span>.log(<span class="string">'complete'</span>);</div><div class="line">           &#125;</div><div class="line">       &#125;);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
<h1 id="jQuery中ajax同源请求的封装"><a href="#jQuery中ajax同源请求的封装" class="headerlink" title="jQuery中ajax同源请求的封装"></a>jQuery中ajax同源请求的封装</h1><p>封装目的：降低代码的冗余,方便调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">使用文档：</div><div class="line">参数名称          参数类型          参数默认值        参数说明</div><div class="line">type             string            get              请求的方式</div><div class="line">url              string            当前地址          请求的地址</div><div class="line"><span class="keyword">async</span>            boolean           <span class="literal">true</span>             是否的异步的方式 <span class="literal">false</span></div><div class="line">data             object            &#123;&#125;               需要发送的数据｛name:xgg｝</div><div class="line">success          <span class="function"><span class="keyword">function</span>                           成功回调函数</span></div><div class="line"><span class="function"><span class="title">error</span>            <span class="title">function</span>                           失败回调函数</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*申明一个全局变量*/</span></div><div class="line"><span class="built_in">window</span>.$ = &#123;&#125;;</div><div class="line"><span class="comment">/*在$对象里头申明一个属性指向一个叫ajax的函数*/</span></div><div class="line">$.ajax = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</div><div class="line">    <span class="comment">/*实现代码*/</span></div><div class="line">    <span class="comment">/*options对象传参*/</span></div><div class="line">    <span class="keyword">if</span>(!options || <span class="keyword">typeof</span> options != <span class="string">'object'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line">    <span class="comment">/*设置默认参数*/</span></div><div class="line">    <span class="keyword">var</span> type = options.type !== <span class="string">'post'</span> ? <span class="string">'get'</span> : <span class="string">'post'</span>;</div><div class="line">    <span class="keyword">var</span> url = options.url || location.pathname;</div><div class="line">    <span class="keyword">var</span> <span class="keyword">async</span> = options.async !== <span class="literal">false</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</div><div class="line">    <span class="keyword">var</span> data = <span class="keyword">typeof</span> options.data == <span class="string">'object'</span> ? options.data : &#123;&#125;;</div><div class="line"></div><div class="line">    <span class="comment">/*发送的数据需要  键值对的字符串格式  转换一下</span></div><div class="line"><span class="comment">    &#123;key:value,a:b&#125;-----&gt;key=value&amp;a=b*/</span></div><div class="line">    <span class="keyword">var</span> dataString = <span class="string">''</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> data)&#123;</div><div class="line">        dataString += key+<span class="string">'='</span>+data[key]+<span class="string">'&amp;'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*if(dataString)&#123;</span></div><div class="line"><span class="comment">        dataString = dataString.slice(0,-1);</span></div><div class="line"><span class="comment">    &#125;*/</span></div><div class="line">    dataString = dataString &amp;&amp; dataString.slice(<span class="number">0</span>,<span class="number">-1</span>);</div><div class="line"></div><div class="line">    <span class="comment">/*ajax编程 基本步骤*/</span></div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">    <span class="comment">/*请求*/</span></div><div class="line">    xhr.open(type,type==<span class="string">'get'</span>?url+<span class="string">'?'</span>+dataString:url,<span class="keyword">async</span>);</div><div class="line">    <span class="keyword">if</span>(type!=<span class="string">'get'</span>)&#123;</div><div class="line">        xhr.setRequestHeader(<span class="string">'Content-Type'</span>,<span class="string">'application/x-www-form-urlencoded'</span>);</div><div class="line">    &#125;</div><div class="line">    xhr.send(type==<span class="string">'get'</span>?<span class="literal">null</span>:dataString);</div><div class="line">    <span class="comment">/*响应*/</span></div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">/*if(xhr.readyState == 4 &amp;&amp; xhr.status == 200)&#123;&#125;*/</span></div><div class="line">        <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</div><div class="line">            <span class="comment">/*通讯完成*/</span></div><div class="line">            <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</div><div class="line">                <span class="comment">/*成功*/</span></div><div class="line">                <span class="comment">/*获取数据*/</span></div><div class="line">                <span class="comment">/*需要和后台的数据格式对应*/</span></div><div class="line">                <span class="comment">/*前后端开发的约定：Content-Type 内容的类型*/</span></div><div class="line">                <span class="comment">/*Content-Type 如果包含xml返回的就xml*/</span></div><div class="line">                <span class="comment">/*Content-Type 如果包含json返回的就json*/</span></div><div class="line">                <span class="keyword">var</span> ct = xhr.getResponseHeader(<span class="string">'Content-Type'</span>);</div><div class="line">                <span class="comment">/*接收数据*/</span></div><div class="line">                <span class="keyword">var</span> result = <span class="literal">null</span>;</div><div class="line">                <span class="keyword">if</span>(ct.indexOf(<span class="string">'xml'</span>) &gt; <span class="number">-1</span>)&#123;</div><div class="line">                    result = xhr.responseXML; <span class="comment">// 获得 XML 形式的响应数据。</span></div><div class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ct.indexOf(<span class="string">'json'</span>) &gt; <span class="number">-1</span>)&#123;</div><div class="line">                    <span class="keyword">var</span> jsonString = xhr.responseText; <span class="comment">// 获得字符串形式的响应数据。</span></div><div class="line">                    result = jsonString &amp;&amp; <span class="built_in">JSON</span>.parse(jsonString);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    result = xhr.responseText;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">/*给成功的业务用*/</span></div><div class="line">                <span class="comment">/*调用成功回调函数*/</span></div><div class="line">                options.success &amp;&amp; options.success(result);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="comment">/*失败*/</span></div><div class="line">                <span class="keyword">var</span> info = &#123;<span class="attr">status</span>:xhr.status,<span class="attr">statusText</span>:xhr.statusText&#125;;</div><div class="line">                options.error &amp;&amp; options.error(info);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="ajax中的跨域请求解决方法"><a href="#ajax中的跨域请求解决方法" class="headerlink" title="ajax中的跨域请求解决方法"></a>ajax中的跨域请求解决方法</h1><p>在Apache中配置反向代理（解决跨域问题）</p>
<p>通过产生一个script标签来实现跨域。因为script标签的src属性是没有跨域的限制的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 跨域只有get请求</span></div><div class="line"><span class="comment">// async属性指是否异步 </span></div><div class="line"><span class="comment">// 跨域的网站 http://doc.studyit.com/data.php</span></div><div class="line">&lt;script <span class="keyword">async</span> type=<span class="string">"text/javascript"</span> src=<span class="string">"http://doc.studyit.com/data.php?flag=1"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>比较方便的做法就是动态创建script标签，然后通过标签的src属性发送跨域请求，并且可以携带参数,后台响应的内容是js代码或函数调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line"><span class="keyword">var</span> param = <span class="string">'?flag=123&amp;callback=zbw'</span>;</div><div class="line">script.src = <span class="string">'http://doc.studyit.com/data.php'</span> + param;</div><div class="line"><span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</div><div class="line">head.appendChild(script);</div></pre></td></tr></table></figure>
<h2 id="后台的data-php代码示例"><a href="#后台的data-php代码示例" class="headerlink" title="后台的data.php代码示例"></a>后台的data.php代码示例</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 是放在跨域域名的虚拟主机里的,这样才能形成跨域请求</span></div><div class="line"><span class="comment">// 通过get传入数据,在data.php中返回一个回调函数执行代码</span></div><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">  $flag = $_GET[<span class="string">'flag'</span>]; <span class="comment">//获取url地址中的数据</span></div><div class="line">  $cbName = $_GET[<span class="string">'abc'</span>];<span class="comment">// callback名字后台一般是写死的,这里的名字为abc</span></div><div class="line">  <span class="comment">// echo 'var n=123;console.log(n);';</span></div><div class="line">  $arr = <span class="keyword">array</span>(<span class="string">'username'</span>=&gt;<span class="string">'lisi'</span>,<span class="string">'age'</span>=&gt;<span class="string">'12'</span>,<span class="string">'flag'</span>=&gt;$flag);</div><div class="line">  $str = json_encode($arr); <span class="comment">// 把数组转化为对象</span></div><div class="line">  <span class="comment">// 函数传入$str然后调用,函数$cbName是通过前端get传输的</span></div><div class="line">  <span class="keyword">echo</span> $cbName.<span class="string">'('</span>.$str.<span class="string">');'</span>;<span class="comment">// 函数调用</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="jQuery中解决跨域的方法"><a href="#jQuery中解决跨域的方法" class="headerlink" title="jQuery中解决跨域的方法"></a>jQuery中解决跨域的方法</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">    url: <span class="string">'http://doc.studyit.com/data.php'</span>,</div><div class="line">    jsonp: <span class="string">'abc'</span>, <span class="comment">// 该属性的作用就是定制回调函数的key（等号左边的部分）</span></div><div class="line">    jsonpCallback: <span class="string">'helloworld'</span>, <span class="comment">// 该属性的作用就是定制回调函数的value（等号后面的部分）</span></div><div class="line">    dataType: <span class="string">'jsonp'</span>,</div><div class="line">  	<span class="comment">//其实设置了dataType: 'jsonp'后，$.ajax方法就和ajax XmlHttpRequest没什么关系了</span></div><div class="line">  	<span class="comment">//取而代之的则是JSONP协议。JSONP是一个非官方的协议</span></div><div class="line">  	<span class="comment">//它允许在服务器端集成Script tags返回至客户端，通过javascript callback的形式实现跨域访问。</span></div><div class="line">    data: &#123;</div><div class="line">        flag: <span class="number">123</span></div><div class="line">    &#125;,</div><div class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(data);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 更改回调函数的名字的地址为: http://doc.studyit.com/data.php?abc=helloworld&amp;flag=123&amp;_=1505731847487</span></div><div class="line"><span class="comment">// 没有更改回调函数的名字的地址为:	http://doc.studyit.com/data.php?callback=jQuery1112025613064331916147_1505555830752&amp;flag=123&amp;_=1505555830753</span></div></pre></td></tr></table></figure>
<h1 id="jQuery中ajax的跨域请求封装函数"><a href="#jQuery中ajax的跨域请求封装函数" class="headerlink" title="jQuery中ajax的跨域请求封装函数"></a>jQuery中ajax的跨域请求封装函数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">           <span class="comment">// 默认参数</span></div><div class="line">           <span class="keyword">var</span> defaults = &#123;</div><div class="line">               jsonp: <span class="string">'callback'</span></div><div class="line">           &#125;;</div><div class="line">           <span class="comment">// 传入的对象覆盖默认参数</span></div><div class="line">           <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</div><div class="line">               defaults[key] = obj[key];</div><div class="line">           &#125;;</div><div class="line"></div><div class="line">           <span class="comment">// 默认回调函数名称</span></div><div class="line">           <span class="comment">// replace(/\D/g, '') 把非数字替换成空字符串</span></div><div class="line">           <span class="keyword">var</span> cbName = <span class="string">'jQuery'</span> + (<span class="string">'v1.11.1'</span> + <span class="built_in">Math</span>.random()).replace(<span class="regexp">/\D/g</span>, <span class="string">''</span>) + <span class="string">'_'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</div><div class="line">           <span class="comment">// 替换默认的回调函数名称</span></div><div class="line">           <span class="keyword">if</span> (defaults.jsonpCallback) &#123;</div><div class="line">               cbName = defaults.jsonpCallback;</div><div class="line">           &#125;;</div><div class="line"></div><div class="line">           <span class="comment">// 定义回调函数然后再后台调用  echo $cbName.'('.$str.');';</span></div><div class="line">           <span class="comment">// data就是data.php中的$str</span></div><div class="line">           <span class="comment">// 在把data传入到封装的ajax跨域函数传入的对象中的success函数中</span></div><div class="line">           <span class="built_in">window</span>[cbName] = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">               defaults.success(data); <span class="comment">// 执行success函数</span></div><div class="line">           &#125;;</div><div class="line"></div><div class="line">           <span class="comment">// 发送跨域请求</span></div><div class="line">           <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">           <span class="keyword">var</span> param = <span class="string">''</span>;</div><div class="line">           <span class="comment">// 传入data就遍历然后拼接给param</span></div><div class="line">           <span class="keyword">if</span> (defaults.data) &#123;</div><div class="line">               <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> defaults.data) &#123;</div><div class="line">                   param += key + <span class="string">'='</span> + defaults.data[key] + <span class="string">'&amp;'</span>;</div><div class="line">               &#125;</div><div class="line">           &#125;;</div><div class="line">           script.src = defaults.url + <span class="string">'?'</span> + param + defaults.jsonp + <span class="string">'='</span> + cbName;</div><div class="line">           <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</div><div class="line">           head.appendChild(script);</div><div class="line">       &#125;;</div></pre></td></tr></table></figure>
<h2 id="后台的data-php代码示例-1"><a href="#后台的data-php代码示例-1" class="headerlink" title="后台的data.php代码示例"></a>后台的data.php代码示例</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span> </div><div class="line">  $flag = $_GET[<span class="string">'flag'</span>];</div><div class="line">  $uname = $_GET[<span class="string">'uname'</span>];</div><div class="line">  $cbName = $_GET[<span class="string">'abc'</span>];<span class="comment">// callback名字后台一般是写死的</span></div><div class="line">  <span class="comment">// echo 'var n=123;console.log(n);';</span></div><div class="line">  $arr = <span class="keyword">array</span>(<span class="string">'username'</span>=&gt;<span class="string">'lisi'</span>,<span class="string">'age'</span>=&gt;<span class="string">'12'</span>,<span class="string">'flag'</span>=&gt;$flag,<span class="string">'uname'</span>=&gt;$uname);</div><div class="line">  $str = json_encode($arr);</div><div class="line">  <span class="keyword">echo</span> $cbName.<span class="string">'('</span>.$str.<span class="string">');'</span>;<span class="comment">// 函数调用</span></div><div class="line"> <span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h1 id="执行ajax跨域封装函数"><a href="#执行ajax跨域封装函数" class="headerlink" title="执行ajax跨域封装函数"></a>执行ajax跨域封装函数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">ajax(&#123;</div><div class="line">    url: <span class="string">'http://doc.studyit.com/data.php'</span>,</div><div class="line">    jsonp: <span class="string">'abc'</span>, <span class="comment">// 该属性的作用就是定制回调函数的key（等号左边的部分）</span></div><div class="line">    jsonpCallback: <span class="string">'hello'</span>, <span class="comment">// 该属性的作用就是定制回调函数的value（等号后面的部分）</span></div><div class="line">    data: &#123;</div><div class="line">        flag: <span class="number">123</span>,</div><div class="line">        uname: <span class="string">'kitty'</span></div><div class="line">    &#125;,</div><div class="line">    dataType: <span class="string">'jsonp'</span>,</div><div class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(data); <span class="comment">// &#123;username: "lisi", age: "12", flag: "123", uname: "kitty"&#125;</span></div><div class="line">    &#125;</div><div class="line">&#125;); </div><div class="line"><span class="comment">//http://doc.studyit.com/data.phpdata.php?flag=123&amp;uname=kitty&amp;abc=hello</span></div><div class="line"><span class="comment">//hello(&#123;username: "lisi", age: "12", flag: "123", uname: "kitty"&#125;);</span></div></pre></td></tr></table></figure>
<h1 id="JSONP解决跨域的优缺点"><a href="#JSONP解决跨域的优缺点" class="headerlink" title="JSONP解决跨域的优缺点"></a>JSONP解决跨域的优缺点</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">JSONP的优点是：它不像XMLHttpRequest对象实现的Ajax请求那样受到同源策略的限制；它的兼容性更好，在更加古老的浏览器中都可以运行，不需要XMLHttpRequest或ActiveX的支持；并且在请求完毕后可以通过调用callback的方式回传结果。</div><div class="line">JSONP的缺点则是：它只支持GET请求而不支持POST等其它类型的HTTP请求；它只支持跨域HTTP请求这种情况，不能解决不同域的两个页面之间如何进行JavaScript调用的问题。</div></pre></td></tr></table></figure>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2017/03/25/JQuery中ajax同源和跨域请求原理及封装/" data-id="cj8sbgnx200016gqofkribkgb" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://yoursite.com/2017/03/25/JQuery中ajax同源和跨域请求原理及封装/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://yoursite.com/2017/03/25/JQuery中ajax同源和跨域请求原理及封装/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/09/07/选择器/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    CSS选择器
                
            </div>
        </a>
    
    
        <a href="/2017/03/22/call方法-和-apply方法-以及-bind方法/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">call方法和apply方法以及bind方法</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/10/15/豆瓣电影/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/10/15/豆瓣电影/" class="title">豆瓣电影</a></p>
                            <p class="item-date"><time datetime="2017-10-15T05:32:17.831Z" itemprop="datePublished">2017-10-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/09/20/Git使用/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/09/20/Git使用/" class="title">git 基本使用</a></p>
                            <p class="item-date"><time datetime="2017-09-20T07:01:09.916Z" itemprop="datePublished">2017-09-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/09/20/cookie和sesson/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/09/20/cookie和sesson/" class="title">cookie和session</a></p>
                            <p class="item-date"><time datetime="2017-09-20T07:01:09.915Z" itemprop="datePublished">2017-09-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/09/20/require.js的使用方法和sea.js/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/09/20/require.js的使用方法和sea.js/" class="title">Javascript模块化编程require.js的用法和sea.js</a></p>
                            <p class="item-date"><time datetime="2017-09-20T07:01:09.913Z" itemprop="datePublished">2017-09-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/09/07/选择器/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/09/07/选择器/" class="title">CSS选择器</a></p>
                            <p class="item-date"><time datetime="2017-09-07T12:53:31.550Z" itemprop="datePublished">2017-09-07</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax/">ajax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apply/">apply</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/">bind</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/call/">call</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/function/">function</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsonp/">jsonp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prototype/">prototype</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/require，sea/">require，sea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/string/">string</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数组/">数组</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/递归/">递归</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/闭包/">闭包</a><span class="tag-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Array/" style="font-size: 10px;">Array</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/apply/" style="font-size: 10px;">apply</a> <a href="/tags/bind/" style="font-size: 10px;">bind</a> <a href="/tags/call/" style="font-size: 10px;">call</a> <a href="/tags/function/" style="font-size: 10px;">function</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/jsonp/" style="font-size: 10px;">jsonp</a> <a href="/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/tags/require，sea/" style="font-size: 10px;">require，sea</a> <a href="/tags/string/" style="font-size: 10px;">string</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/递归/" style="font-size: 15px;">递归</a> <a href="/tags/闭包/" style="font-size: 15px;">闭包</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 John Doe<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://yoursite.com/2017/03/25/JQuery中ajax同源和跨域请求原理及封装/';
        
        this.page.identifier = 'JQuery中ajax同源和跨域请求原理及封装';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hexo-theme-icarus' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>